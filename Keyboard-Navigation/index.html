<!DOCTYPE html>
<html>
<head>
<style>
.container {
  display: grid;
  gap: 50px;
  grid-template-columns: auto auto auto auto;
  background-color: #333;
  padding: 30px;
}

.container > div {
display: inline-block;
  background-color: #000;
  border: 1px solid #ccc;
  padding: 20px;
  font-size: 30px;
  text-align: center;
  color:#fff;
  width: 25%;
}
.container > div:focus{
  outline-color:orange;
}
</style>
</head>
<body>
<div class="container">
  <div tabindex="0">1</div>
  <div tabindex="0">2</div>
  <div tabindex="0">3</div>  
  <p tabindex="0" style="display:block; width: 100%;">sjhcbjhsdabckj sdkcbkjsdbckjsd sdcbkjsdc</p>
  <div tabindex="0">4</div>
  <p tabindex="0" style="display:inline-block; width: 20%;">sjhcbjhsdabckj sdkcbkjsdbckjsd sdcbkjsdc</p>
  <p tabindex="0" style="display:inline-block; width: 20%;">sjhcbjhsdabckj sdkcbkjsdbckjsd sdcbkjsdc</p>
  <p tabindex="0" style="display:inline-block; width: 20%;">sjhcbjhsdabckj sdkcbkjsdbckjsd sdcbkjsdc</p>
  <p tabindex="0" style="display:inline-block; width: 20%;">sjhcbjhsdabckj sdkcbkjsdbckjsd sdcbkjsdc</p>
  
  <div tabindex="0">5</div>
  <div tabindex="0">6</div>  
  <div tabindex="0">7</div>
  <div tabindex="0">8</div>
  <div tabindex="0">9</div>
  <div tabindex="0">10</div>  
  <div tabindex="0">11</div>
  <div tabindex="0">12</div>
</div>

</body>
<script>
window.addEventListener('keydown', KeyPress);
function KeyPress(event) {
	const focusableElements = document.querySelectorAll('button, input, textarea, a, select, li, [tabindex]');
	const activeElement = document.activeElement;
	const currentIndex = Array.prototype.indexOf.call(focusableElements, activeElement);
	const currentRect = activeElement.getBoundingClientRect();
    const startPos=currentRect.top;
    const endPos=currentRect.left+currentRect.width;
    const topEle="";
    const bottomEle="";

	switch (event.key) {
		case "ArrowUp":
            targetUp();
			break;
		case "ArrowDown":
			targetDown();
			break;
		case "ArrowLeft":
			newIndex = currentIndex - 1;
			break;
		case "ArrowRight":
			newIndex = currentIndex + 1;
			break;
		default:
			return;
	}
    function targetDown(){
        for (let i = 0; i < focusableElements.length; i++) {
        const element = focusableElements[i];
        const rect = element.getBoundingClientRect();
        if (startPos < rect.top) {
            if (currentRect.left <= rect.left && endPos >= rect.left) {
            newIndex=i;
            break; // Exit the loop
            }
        }
        }
    }
    function targetUp(){
        for (let i = 0; i < focusableElements.length; i++) {
        const element = focusableElements[i];
        const rect = element.getBoundingClientRect();
        if (startPos > rect.top) {
            if (currentRect.left <= rect.left && endPos >= rect.left) {
            newIndex=i;
            }
        }
        }
    }
	if (newIndex >= 0 && newIndex < focusableElements.length) {
		focusableElements[newIndex].focus();
	}
}
</script>
</html>
